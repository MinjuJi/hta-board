<html layout:decorate="~{layout/base}">
<div layout:fragment="content" class="container my-3">
	<div class="row mb-3">
		<div class="col-12">
			<h1>게시글 상세정보</h1>
			
			<table class="table">
				<colgroup>
					<col width="15%">
					<col width="35%">
					<col width="15%">
					<col width="35%">
				</colgroup>
				<tbody>
					<tr>
						<th>제목</th>
						<td th:text="${post.title}"></td>
						<th>번호</th>
						<td th:text="${post.id}"></td>
					</tr>
					<tr>
						<th>등록일</th>
						<td th:text="${#temporals.format(post.createdDate, 'yyyy년 M월 d일 a h시 m분 s초')}"></td>
						<th>수정일</th>
						<td th:text="${#temporals.format(post.updatedDate, 'yyyy년 M월 d일 a h시 m분 s초')}"></td>
					</tr>
					<tr>
						<th>내용</th>
						<td th:text="${post.content}" colspan="3">내용입니다.</td>
					</tr>
				</tbody>
			</table>
			
			<!-- 
				sec:authorize="isAuthenticated()"
					인증된 사용자인 경우 true로 판정하고, 해당 컨텐츠를 출력한다.
				
				th:if="${#authentication.principal.username == post.user.username}"
					현재 로그인된 사용자의 아이디와 게시글 작성자 아이디가 일치하는 경우 true로 판정하고, 해당 컨텐츠를 출력한다.
				
				th:text="${#sets.size(post.postVoters)}"
					
			 -->
			<div class="text-end">
				<a th:href="@{|/post/vote/${post.id}|}"
					sec:authorize="isAuthenticated()" 
					class="btn btn-sm btn-success">
					추천
					<span class="badge rounded-fill bg-success" th:text="${#sets.size(post.postVoters)}">1</span>
				</a>			
				<a th:href="@{|/post/modify/${post.id}|}" 
					sec:authorize="isAuthenticated()" 
					th:if="${#authentication.principal.username == post.user.username}"
					class="btn btn-sm btn-warning">
					수정
				</a>			
				<a th:href="@{|/post/delete/${post.id}|}" 
					sec:authorize="isAuthenticated()" 
					th:if="${#authentication.principal.username == post.user.username}"
					class="btn btn-sm btn-danger">
					삭제
				</a>			
			</div>
		</div>		
	</div>
	
	<!-- 댓글 목록 및 작성폼 -->
	<div class="row mb-3">
		<div class="col-12">
			<!-- 댓글 목록 -->
			
			
			
			<!-- 댓글 작성품 -->
			<form sec:authorize="isAuthenticated()" action="border p-3 mb-3" method="post" th:action="@{|/reply/create/${post.id}|}">
				<div class="row g-3">
					<div class="col-12 position-relative">
						<textarea rows="3" class="form-control" name="content"></textarea>
						<button type="submit" class="btn btn-outline-dark btn-sm position-absolute" style="bottom: 15px; right: 25px;">댓글등록</button>
					</div>
				</div>
			</form>
		</div>		
	</div>
</div>
</html>